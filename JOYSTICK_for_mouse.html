<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Joystick</title>
    <style>
      #joystick {
        position: relative;
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background-color: #313743;
        margin: 5px;
      }

      #button {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 50px;
        height: 50px;
        background-color: #e1e1e1;
        border-radius: 50%;
        border: 8px solid white;
      }
    </style>
  </head>
  <body>
    <div id="joystick">
      <div id="button"></div>
    </div>

    <script>
      const joystick = document.getElementById("joystick");
      const button = document.getElementById("button");
      let isDragging = false;

      const handleMouseDown = (event) => {
        isDragging = true;
      };

      const handleMouseUp = (event) => {
        isDragging = false;
        setButtonPos({x: 0, y: 0});
      };

      const handleMouseMove = (event) => {
        if (isDragging) {
          const joystickRect = joystick.getBoundingClientRect();
          const newX = event.clientX - joystickRect.left - joystickRect.width / 2;
          const newY = event.clientY - joystickRect.top - joystickRect.height / 2;
          console.log(newX + " " + newY);
          let ra = newX * newX + newY * newY;
          ra = Math.sqrt(ra);
          console.log(ra);
          if (ra > 50) {
            button.style.transform = `translate(${newX - 1}px, ${newY - 1}px)`;
          } else {
            button.style.transform = `translate(${newX}px, ${newY}px)`;
          }
        }
      };

      joystick.addEventListener("mousemove", handleMouseMove);
      joystick.addEventListener("mouseup", handleMouseUp);
      joystick.addEventListener("mouseleave", handleMouseUp);
      button.addEventListener("mousedown", handleMouseDown);
    </script>
  </body>
</html>
